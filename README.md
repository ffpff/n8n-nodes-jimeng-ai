# n8n-nodes-jimeng-ai

ËøôÊòØ‰∏Ä‰∏™ n8n Á§æÂå∫ËäÇÁÇπ,Áî®‰∫éÈõÜÊàê[Âç≥Ê¢¶ AI ÊñáÁîüÂõæ 3.1](https://www.volcengine.com/docs/6791/1343077) API„ÄÇÂç≥Ê¢¶ AI ÊòØÁÅ´Â±±ÂºïÊìéÊèê‰æõÁöÑÊñáÊú¨ÁîüÊàêÂõæÁâáÊúçÂä°,ÊîØÊåÅÈ´òË¥®ÈáèÁöÑ AI ÂõæÂÉèÁîüÊàê„ÄÇ

## ÂäüËÉΩÁâπÊÄß

- ‚úÖ ÊîØÊåÅÊñáÊú¨Âà∞ÂõæÁâáÁîüÊàê (Text-to-Image)
- ‚úÖ Ëá™Âä®ËΩÆËØ¢‰ªªÂä°ÁªìÊûú,Êó†ÈúÄÊâãÂä®Êü•ËØ¢
- ‚úÖ ÊîØÊåÅÊñáÊú¨Êâ©ÂÜô (use_pre_llm)
- ‚úÖ Ëá™ÂÆö‰πâÂõæÂÉèÂ∞∫ÂØ∏ (512-2048px)
- ‚úÖ Âõ∫ÂÆöÈöèÊú∫ÁßçÂ≠ê‰ª•Ëé∑ÂæóÂèØÂ§çÁé∞ÁªìÊûú
- ‚úÖ ÊîØÊåÅÊ∑ªÂä†Ê∞¥Âç∞ÈÖçÁΩÆ
- ‚úÖ ËøîÂõûÂõæÁâá URL Âíå Base64 Êï∞ÊçÆ

## ÂÆâË£Ö

### Á§æÂå∫ËäÇÁÇπÂÆâË£Ö (Êé®Ëçê)

Âú® n8n ‰∏≠,ËøõÂÖ• **Settings > Community Nodes** Âπ∂ÊêúÁ¥¢ `n8n-nodes-jimeng-ai` ËøõË°åÂÆâË£Ö„ÄÇ

### ÊâãÂä®ÂÆâË£Ö

```bash
cd ~/.n8n/nodes
git clone https://github.com/YOUR_USERNAME/n8n-jimeng-node.git
cd n8n-jimeng-node
npm install
npm run build
```

ÁÑ∂ÂêéÈáçÂêØ n8n:

```bash
n8n start
```

## ÈÖçÁΩÆ

### 1. Ëé∑Âèñ API Âá≠ËØÅ

1. Ê≥®ÂÜåÂπ∂ÁôªÂΩï[ÁÅ´Â±±ÂºïÊìéÊéßÂà∂Âè∞](https://console.volcengine.com/)
2. ÂºÄÈÄö[Âç≥Ê¢¶ AI ÊúçÂä°](https://www.volcengine.com/product/vepix)
3. Âú® **ËÆøÈóÆÂØÜÈí•ÁÆ°ÁêÜ** ‰∏≠ÂàõÂª∫ Access Key ID Âíå Secret Access Key

### 2. Âú® n8n ‰∏≠ÈÖçÁΩÆÂá≠ËØÅ

1. Âú® n8n ‰∏≠ÂàõÂª∫Êñ∞ÁöÑ **Jimeng AI** Âá≠ËØÅ
2. Â°´ÂÖ•‰Ω†ÁöÑ Access Key ID Âíå Secret Access Key
3. ‰øùÂ≠òÂá≠ËØÅ

## ‰ΩøÁî®ÊñπÊ≥ï

### Âü∫Á°ÄÁ§∫‰æã

ÊúÄÁÆÄÂçïÁöÑÁî®Ê≥ïÊòØÂè™Êèê‰æõ `prompt` ÂèÇÊï∞:

```
ÊèêÁ§∫ËØç: "‰∏ÄÂè™ÂèØÁà±ÁöÑÊü¥Áä¨Âú®ËçâÂú∞‰∏äÂ•îË∑ë,Èò≥ÂÖâÊòéÂ™ö,4KÈ´òÊ∏Ö"
```

ËäÇÁÇπ‰ºöËá™Âä®:
1. Êèê‰∫§ÂõæÁâáÁîüÊàê‰ªªÂä°
2. ËΩÆËØ¢‰ªªÂä°Áä∂ÊÄÅÁõ¥Âà∞ÂÆåÊàê
3. ËøîÂõûÁîüÊàêÁöÑÂõæÁâá URL Âíå Base64 Êï∞ÊçÆ

### È´òÁ∫ßÈÖçÁΩÆ

**ÂõæÂÉèÂ∞∫ÂØ∏**:
- È¢ÑËÆæÈÄâÈ°π: 1328√ó1328 (Ê≠£ÊñπÂΩ¢), 1664√ó936 (16:9), 936√ó1664 (9:16)
- Ëá™ÂÆö‰πâÂ∞∫ÂØ∏: 512-2048px,ÂÆΩÈ´òÊØî 1:3 Âà∞ 3:1

**ÊñáÊú¨Êâ©ÂÜô**:
- ÂêØÁî® `use_pre_llm`: Áü≠ÊèêÁ§∫ËØç‰ºöËá™Âä®Êâ©ÂÜô‰∏∫Êõ¥ËØ¶ÁªÜÁöÑÊèèËø∞
- ÂÖ≥Èó≠ `use_pre_llm`: ‰ΩøÁî®Á≤æÁ°ÆÁöÑÂéüÂßãÊèêÁ§∫ËØç

**ÈöèÊú∫ÁßçÂ≠ê**:
- ËÆæÁΩÆÂõ∫ÂÆöÁöÑ `seed` ÂÄº (‰æãÂ¶Ç 42) ÂèØ‰ª•Ëé∑ÂæóÂèØÂ§çÁé∞ÁöÑÁªìÊûú
- ‰ΩøÁî® -1 (ÈªòËÆ§) ‰ºöÁîüÊàêÈöèÊú∫ÂõæÁâá

**ËΩÆËØ¢ÈÖçÁΩÆ**:
- `max_polling_time`: ÊúÄÂ§ßËΩÆËØ¢Êó∂Èó¥ (Áßí),ÈªòËÆ§ 300
- `polling_interval`: ËΩÆËØ¢Èó¥Èöî (Áßí),ÈªòËÆ§ 3

**Ê∞¥Âç∞ÈÖçÁΩÆ**:
- ‰ΩçÁΩÆ: Â∑¶‰∏äËßí (0), Âè≥‰∏äËßí (1), Â∑¶‰∏ãËßí (2), Âè≥‰∏ãËßí (3)
- ËØ≠Ë®Ä: ‰∏≠Êñá (0), Ëã±Êñá (1)
- ‰∏çÈÄèÊòéÂ∫¶: 0-1 (0=ÂÆåÂÖ®ÈÄèÊòé, 1=‰∏çÈÄèÊòé)
- Ëá™ÂÆö‰πâÊñáÊú¨: ÂèØÈÄâ

## ËæìÂá∫Êï∞ÊçÆ

ËäÇÁÇπËøîÂõû‰ª•‰∏ãÊï∞ÊçÆ:

```json
{
  "task_id": "xxx",
  "status": "done",
  "status_code": 10000,
  "image_urls": ["https://..."],
  "binary_data_base64": ["base64..."],
  "request_id": "xxx"
}
```

**Â≠óÊÆµËØ¥Êòé**:
- `task_id`: ‰ªªÂä° ID
- `status`: ‰ªªÂä°Áä∂ÊÄÅ (done/generating/in_queue)
- `status_code`: Áä∂ÊÄÅÁ†Å (10000 Ë°®Á§∫ÊàêÂäü)
- `image_urls`: ÂõæÁâá URL Êï∞ÁªÑ (24Â∞èÊó∂ÊúâÊïà)
- `binary_data_base64`: ÂõæÁâá Base64 Êï∞ÊçÆÊï∞ÁªÑ
- `request_id`: ËØ∑Ê±Ç ID

## Â∑•‰ΩúÊµÅÁ§∫‰æã

### Á§∫‰æã 1: ÁÆÄÂçïÂõæÁâáÁîüÊàê

```
1. [Start] ÊâãÂä®Ëß¶Âèë
2. [Set] ËÆæÁΩÆÊèêÁ§∫ËØç
3. [Jimeng AI] ÁîüÊàêÂõæÁâá
4. [Write Binary File] ‰øùÂ≠òÂõæÁâáÂà∞Êú¨Âú∞
```

### Á§∫‰æã 2: ÊâπÈáèÁîüÊàê

```
1. [Schedule Trigger] ÂÆöÊó∂Ëß¶Âèë
2. [Code] ÁîüÊàêÂ§ö‰∏™ÊèêÁ§∫ËØç
3. [Jimeng AI] ÊâπÈáèÁîüÊàêÂõæÁâá
4. [Google Drive] ‰∏ä‰º†Âà∞‰∫ëÁõò
```

### Á§∫‰æã 3: ÁªìÂêàÂÖ∂‰ªñÊúçÂä°

```
1. [Webhook] Êé•Êî∂Áî®Êà∑ËØ∑Ê±Ç
2. [OpenAI] ‰ºòÂåñÊèêÁ§∫ËØç
3. [Jimeng AI] ÁîüÊàêÂõæÁâá
4. [SendGrid] ÂèëÈÄÅÈÇÆ‰ª∂ÈÄöÁü•
```

## ÈôêÂà∂‰∏éÊ≥®ÊÑè‰∫ãÈ°π

‚ö†Ô∏è **ÈáçË¶ÅÈôêÂà∂**:

1. **ÊèêÁ§∫ËØçÈïøÂ∫¶**: ÊúÄÂ§ß 800 Â≠óÁ¨¶,Âª∫ËÆÆ ‚â§ 120 Â≠óÁ¨¶
2. **ÂõæÁâáÈìæÊé•ÊúâÊïàÊúü**: 24 Â∞èÊó∂
3. **‰ªªÂä°ÁªìÊûú‰øùÁïôÊó∂Èó¥**: 12 Â∞èÊó∂
4. **ÂÆΩÈ´òÊØîÈôêÂà∂**: 1:3 Âà∞ 3:1
5. **ÂõæÂÉèÂ∞∫ÂØ∏ËåÉÂõ¥**: 512-2048px

üí° **ÊúÄ‰Ω≥ÂÆûË∑µ**:

- ‰ΩøÁî®ËØ¶ÁªÜ‰∏îÊ∏ÖÊô∞ÁöÑÊèêÁ§∫ËØçËé∑ÂæóÊõ¥Â•ΩÁöÑÊïàÊûú
- ÂêØÁî®ÊñáÊú¨Êâ©ÂÜô (use_pre_llm) ÂèØ‰ª•ÊèêÂçáÁü≠ÊèêÁ§∫ËØçÁöÑÁîüÊàêË¥®Èáè
- ÂØπ‰∫éÈúÄË¶ÅÂèØÂ§çÁé∞ÁªìÊûúÁöÑÂú∫ÊôØ,ËÆæÁΩÆÂõ∫ÂÆöÁöÑÈöèÊú∫ÁßçÂ≠ê
- ÂèäÊó∂‰øùÂ≠òÊàñÂ§ÑÁêÜÁîüÊàêÁöÑÂõæÁâá,ÈÅøÂÖç URL ËøáÊúü
- ÂêàÁêÜËÆæÁΩÆËΩÆËØ¢Èó¥Èöî‰ª•Âπ≥Ë°°ÂìçÂ∫îÈÄüÂ∫¶Âíå API Ë∞ÉÁî®È¢ëÁéá

## ÊïÖÈöúÊéíÈô§

### ÈîôËØØ: "‰ªªÂä°Êèê‰∫§Â§±Ë¥•"
- Ê£ÄÊü• API Âá≠ËØÅÊòØÂê¶Ê≠£Á°Æ
- Á°ÆËÆ§Âç≥Ê¢¶ AI ÊúçÂä°Â∑≤ÂºÄÈÄö
- Ê£ÄÊü•ÊèêÁ§∫ËØçÊòØÂê¶ÂåÖÂê´ÊïèÊÑüÂÜÖÂÆπ

### ÈîôËØØ: "ËΩÆËØ¢Ë∂ÖÊó∂"
- Â¢ûÂä† `max_polling_time` ÂèÇÊï∞
- Ê£ÄÊü•ÁΩëÁªúËøûÊé•
- ÂáèÂ∞èÂõæÂÉèÂ∞∫ÂØ∏

### ÈîôËØØ: "‰ªªÂä°Êú™ÊâæÂà∞"
- ‰ªªÂä°ÂèØËÉΩÂ∑≤ËøáÊúü (12Â∞èÊó∂)
- Ê£ÄÊü• task_id ÊòØÂê¶Ê≠£Á°Æ

## ÂºÄÂèë

### Êú¨Âú∞ÂºÄÂèë

```bash
# ÂÖãÈöÜ‰ªìÂ∫ì
git clone https://github.com/YOUR_USERNAME/n8n-jimeng-node.git
cd n8n-jimeng-node

# ÂÆâË£Ö‰æùËµñ
npm install

# ËøêË°åÊµãËØï
npm test

# ÊûÑÂª∫
npm run build

# ÁõëÂê¨Êñá‰ª∂ÂèòÂåñ
npm run dev
```

### ÈõÜÊàêÂà∞Êú¨Âú∞ n8n (Docker ÁéØÂ¢É)

Â¶ÇÊûú‰Ω†ÁöÑ n8n ËøêË°åÂú® Docker ‰∏≠,Êåâ‰ª•‰∏ãÊ≠•È™§ÈõÜÊàêËá™ÂÆö‰πâËäÇÁÇπ:

#### Ê≠•È™§ 1: ‰øÆÊîπ docker-compose.yaml

Âú®‰Ω†ÁöÑ n8n docker-compose Êñá‰ª∂‰∏≠Ê∑ªÂä†ËäÇÁÇπÊåÇËΩΩ:

```yaml
services:
  myn8n:
    image: n8nio/n8n:latest
    container_name: Myn8n
    ports:
      - "5678:5678"
    volumes:
      - /Users/romi/Documents/Projects/n8n/data:/home/node/.n8n
      - /Users/romi/Documents/Projects/n8n/output:/home/node/output
      # Ê∑ªÂä†Ëá™ÂÆö‰πâËäÇÁÇπÊåÇËΩΩ
      - /path/to/n8n-jimeng-node:/data/custom-nodes/n8n-nodes-jimeng
    environment:
      TZ: Asia/Shanghai
      # Ê∑ªÂä†Ëá™ÂÆö‰πâÊâ©Â±ïË∑ØÂæÑ
      N8N_CUSTOM_EXTENSIONS: /data/custom-nodes
```

**Ê≥®ÊÑè**: Â∞Ü `/path/to/n8n-jimeng-node` ÊõøÊç¢‰∏∫‰Ω†Êú¨Âú∞ËäÇÁÇπÈ°πÁõÆÁöÑÂÆûÈôÖË∑ØÂæÑ„ÄÇ

#### Ê≠•È™§ 2: ÊûÑÂª∫Âπ∂ÂêØÂä®

```bash
# 1. ÊûÑÂª∫ËäÇÁÇπ
npm run build

# 2. ÂÅúÊ≠¢Âπ∂ÈáçÊñ∞ÂêØÂä®ÂÆπÂô®
docker-compose -f your-docker-compose.yaml down
docker-compose -f your-docker-compose.yaml up -d

# 3. Êü•ÁúãÊó•ÂøóÁ°ÆËÆ§Âä†ËΩΩÊàêÂäü
docker-compose -f your-docker-compose.yaml logs -f
```

#### Ê≠•È™§ 3: È™åËØÅÂÆâË£Ö

1. ÊâìÂºÄ n8n Web ÁïåÈù¢ (http://localhost:5678)
2. ÂàõÂª∫Êñ∞ÁöÑÂ∑•‰ΩúÊµÅ
3. Âú®ËäÇÁÇπÊêúÁ¥¢Ê°ÜËæìÂÖ• "Jimeng" Êàñ "Âç≥Ê¢¶"
4. Â∫îËØ•ËÉΩÁúãÂà∞ **Jimeng AI** ËäÇÁÇπ

#### ÂºÄÂèëÊó∂ÁöÑÁÉ≠Êõ¥Êñ∞ÊµÅÁ®ã

ÊØèÊ¨°‰øÆÊîπ‰ª£Á†ÅÂêé:

```bash
# 1. ÈáçÊñ∞ÊûÑÂª∫
npm run build

# 2. ÈáçÂêØÂÆπÂô®
docker-compose -f your-docker-compose.yaml restart

# 3. Âà∑Êñ∞ n8n Web ÁïåÈù¢
```

#### Â∏∏ËßÅÈóÆÈ¢ò

**Q: ‰øÆÊîπ‰ª£Á†ÅÂêéËäÇÁÇπÊ≤°ÊúâÊõ¥Êñ∞?**
- Á°Æ‰øùÊâßË°å‰∫Ü `npm run build`
- ÈáçÂêØ Docker ÂÆπÂô®
- Ê∏ÖÈô§ÊµèËßàÂô®ÁºìÂ≠òÂπ∂Âà∑Êñ∞È°µÈù¢

**Q: Êâæ‰∏çÂà∞ËäÇÁÇπ?**
- Ê£ÄÊü• `dist/` ÁõÆÂΩïÊòØÂê¶ÁîüÊàê
- Êü•ÁúãÂÆπÂô®Êó•Âøó: `docker-compose logs -f`
- Á°ÆËÆ§ `N8N_CUSTOM_EXTENSIONS` ÁéØÂ¢ÉÂèòÈáèÂ∑≤ËÆæÁΩÆ

**Q: ËäÇÁÇπÂä†ËΩΩÈîôËØØ?**
- ËøõÂÖ•ÂÆπÂô®Ê£ÄÊü•: `docker exec -it Myn8n ls -la /data/custom-nodes/n8n-nodes-jimeng`
- Á°Æ‰øù `package.json` ‰∏≠ÁöÑ `n8n.nodes` ÈÖçÁΩÆÊ≠£Á°Æ
- Ê£ÄÊü•ËäÇÁÇπ‰ª£Á†ÅÊòØÂê¶ÊúâÁºñËØëÈîôËØØ

### ËøêË°åÊµãËØï

```bash
# ËøêË°åÊâÄÊúâÊµãËØï
npm test

# ÁõëÂê¨Ê®°Âºè
npm run test:watch

# ÊµãËØïË¶ÜÁõñÁéá
npm run test:coverage
```

### ‰ª£Á†ÅË¥®Èáè

```bash
# ‰ª£Á†ÅÊ£ÄÊü•
npm run lint

# Ëá™Âä®‰øÆÂ§ç
npm run lintfix

# ‰ª£Á†ÅÊ†ºÂºèÂåñ
npm run format
```

## ÊäÄÊúØÊ†à

- **n8n**: Â∑•‰ΩúÊµÅËá™Âä®ÂåñÂπ≥Âè∞
- **TypeScript**: ‰∏ªË¶ÅÂºÄÂèëËØ≠Ë®Ä
- **AWS Signature V4**: API ËÆ§ËØÅÊñπÂºè
- **Jest**: ÊµãËØïÊ°ÜÊû∂

## API ÊñáÊ°£

- [Âç≥Ê¢¶ AI ÊñáÁîüÂõæ 3.1 API ÊñáÊ°£](https://www.volcengine.com/docs/6791/1343077)
- [ÁÅ´Â±±ÂºïÊìéÊéßÂà∂Âè∞](https://console.volcengine.com/)

## ËÆ∏ÂèØËØÅ

MIT License

## Ë¥°ÁåÆ

Ê¨¢ËøéÊèê‰∫§ Issue Âíå Pull Request!

Âú®Êèê‰∫§ PR ‰πãÂâç,ËØ∑Á°Æ‰øù:
- ÊâÄÊúâÊµãËØïÈÄöËøá (`npm test`)
- ‰ª£Á†ÅÈÄöËøá lint Ê£ÄÊü• (`npm run lint`)
- ‰ª£Á†ÅÂ∑≤Ê†ºÂºèÂåñ (`npm run format`)

## ÊîØÊåÅ

Â¶ÇÊûú‰Ω†ËßâÂæóËøô‰∏™È°πÁõÆÊúâÁî®,ËØ∑Áªô‰∏™ ‚≠êÔ∏è Star!

ÊúâÈóÆÈ¢òÊàñÂª∫ËÆÆ?ËØ∑[Êèê‰∫§ Issue](https://github.com/YOUR_USERNAME/n8n-jimeng-node/issues)„ÄÇ

## Êõ¥Êñ∞Êó•Âøó

### 0.1.0 (2025-01-XX)

- ‚ú® ÂàùÂßãÁâàÊú¨
- ‚úÖ ÊîØÊåÅÊñáÊú¨ÁîüÊàêÂõæÁâá
- ‚úÖ Ëá™Âä®ËΩÆËØ¢‰ªªÂä°ÁªìÊûú
- ‚úÖ ÂÆåÊï¥ÁöÑÂèÇÊï∞ÈÖçÁΩÆÈÄâÈ°π
- ‚úÖ ÂçïÂÖÉÊµãËØïË¶ÜÁõñÁéá > 85%

---

Made with ‚ù§Ô∏è for the n8n community